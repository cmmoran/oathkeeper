{
  "$id": "https://raw.githubusercontent.com/ory/oathkeeper/master/.schemas/authorizers.remote_json.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Remote JSON Configuration",
  "description": "This section is optional when the authorizer is disabled.",
  "properties": {
    "remote": {
      "title": "Remote Authorizer URL",
      "type": "string",
      "format": "uri",
      "description": "The URL of the remote authorizer. The remote authorizer is expected to return either 200 OK or 403 Forbidden to allow/deny access.\n\n>If this authorizer is enabled, this value is required.",
      "examples": ["https://host/path"]
    },
    "headers": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "payload": {
      "title": "JSON Payload",
      "type": "string",
      "description": "The JSON payload of the request sent to the remote authorizer. The string will be parsed by the Go text/template package and applied to an AuthenticationSession object.\n\n>If this authorizer is enabled, this value is required.",
      "examples": ["{\"subject\":\"{{ .Subject }}\"}"]
    },
    "forward_response_headers_to_upstream": {
      "title": "Allowed Remote HTTP Headers for his Responses",
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "A list of non simple headers the remote is allowed to return to mutate requests.",
      "examples": ["X-Foo"]
    },
    "signed_payload": {
      "title": "Sign payload and set the signature to a named header",
      "default": null,
      "properties": {
        "header": {
          "title": "Header to contain the payload signature (base64)",
          "type": "string",
          "description": "The name of the request header that will be populated with the signature of the payload that will be sent to the authorizer",
          "examples": ["X-Request-Signature", "X-Jwks-Signature"]
        },
        "shared_key": {
          "title": "Shared key to use to sign the payload. (Cannot be set along with 'jwks_url')",
          "type": "string",
          "description": "The shared key to use to sign the payload to generate an HMAC signature of the payload",
          "examples": ["47ac7a07-b504-458d-a081-c80da1cfe6cd"]
        },
        "jwks_url": {
          "type": "string",
          "format": "uri",
          "title": "JSON Web Key URL (Cannot be set along with 'shared_key')",
          "description": "Sets the URL where keys should be fetched from. Supports remote locations (http, https) as well as local filesystem paths.\n.",
          "examples": [
            "https://fetch-keys/from/this/location.json",
            "file:///from/this/absolute/location.json",
            "file://../from/this/relative/location.json"
          ]
        }
      }
    }
  },
  "required": ["remote", "payload"],
  "additionalProperties": false
}
